<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ch5-svelte</title><meta name="description" content="Documentation for ch5-svelte"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ch5-svelte</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>ch5-svelte</h1></div><div class="tsd-panel tsd-typography"><a id="crestron-ch5-wrapper-for-svelte" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Crestron CH5 Wrapper for Svelte<a href="#crestron-ch5-wrapper-for-svelte" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><strong>Cybernetically enhanced Crestron UIs</strong></p>
<p>Extend the functionality of the @crestron/ch5-crcomlib library with the power of Svelte 5 Runes. This library provides a simple and easy to use interface for using crestron signals using the svelte 5 runes API.</p>
<p>This library does not expose any Crestron CH-5 Components directly. Instead, it provides a simple interface for using the signals from the Crestron CH-5 components in a Svelte application. There are numerous Svelte UI component libraries that provide feature rich components.</p>
<p>Note: This library is <strong>not</strong> sponsored, supported or endorsed by Crestron Electronics Inc. Crestron True Blue Support cannot provide support for this library, or any issues that may arise from its use.</p>
<a id="features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>ðŸ“¦ Easy to use - Built for A/V programmers.</li>
<li>ðŸ’Ž Svelte 5 Runes - Makes use of the Runes API in svelte 5.</li>
<li>ðŸ“¡ Realtime Updates - Automatically updates UI as control system feedback changes.</li>
<li>ðŸ¤– Automatic Subscription Management - Subscription and cleanup of signals handled automatically by Svelte.</li>
<li>âœ¨ Full TypeScript Support - Better code completion and error checking.</li>
<li>âœ… Open Source - Licensed under the Apache 2.0 License.</li>
</ul>
<a id="getting-started" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Getting Started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="prerequisites" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Prerequisites<a href="#prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Crestron 3/4-Series Control System or VC-4 Server.</li>
<li>Crestron ch5-cli tool installed globally - <a href="https://sdkcon78221.crestron.com/sdk/Crestron_HTML5UI/Content/Topics/QS-Installation.htm">Link to Crestron Docs - External</a></li>
</ul>
<blockquote>
<p>Note: it is NOT recommended to install the CH5 VS Code extension, unless you will be using native CH5 components. The extension is not required for using this library.</p>
</blockquote>
<a id="project-creation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Project Creation<a href="#project-creation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>It is <strong>strongly recommended</strong> that you start with a plane Svelte project through Vite. (as opposed to SvelteKit - see the section on <a href="#sveltekit">SvelteKit</a> below if you must use SvelteKit).</p>
<p>Create a new Svelte Project with Vite:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">create</span><span class="hl-1"> </span><span class="hl-2">vite@latest</span><span class="hl-1"> </span><span class="hl-2">my-ch5-ui</span><span class="hl-1"> </span><span class="hl-3">--</span><span class="hl-1"> </span><span class="hl-3">--template</span><span class="hl-1"> </span><span class="hl-2">svelte-ts</span><br/><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">my-ch5-ui</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<p>Replace <code>my-ch5-ui</code> with the name of your project.</p>
<p>At this point, you may wish to install other UI libraries or tools such as TailwindCSS.</p>
<a id="installation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Due to how the CrComLib binds itself to the window object, there is some manual setup required to use the library in a Svelte project. We must also statically copy the the CrComLib to the project root on build otherwise it will be omitted in build bundles.</p>
<p>First, install this wrapper, and the the CrComLib:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">ch5-svelte</span><span class="hl-1"> </span><span class="hl-2">@crestron/ch5-crcomlib</span>
</code><button type="button">Copy</button></pre>

<p>Next, install the vite-plugin-static-copy plugin as a dev dependency:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">-d</span><span class="hl-1"> </span><span class="hl-2">vite-plugin-static-copy</span>
</code><button type="button">Copy</button></pre>

<p>Next, we will need to modify the <code>vite.config.ts</code> file to copy the CrComLib to the project root on build. This is done by importing the plugin and adding it to the plugins array.</p>
<p>This is done in the <code>vite.config.ts</code> file in the root of your project.</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">defineConfig</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vite&#39;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">svelte</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@sveltejs/vite-plugin-svelte&#39;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">viteStaticCopy</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vite-plugin-static-copy&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// https://vitejs.dev/config/</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-4">default</span><span class="hl-1"> </span><span class="hl-0">defineConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">plugins:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-0">svelte</span><span class="hl-1">(),</span><br/><br/><span class="hl-1">    </span><span class="hl-6">//Add this to copy the cr-com-lib.js file to the build directory</span><br/><span class="hl-1">    </span><span class="hl-0">viteStaticCopy</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">targets:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&#39;node_modules/@crestron/ch5-crcomlib/build_bundles/umd/cr-com-lib.js&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">dest:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      ]}),</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>The CrComLib must be manually imported in a script tag in the <code>index.html</code> file. This is because the CrComLib does not have a default export, and instead binds itself to the window object.</p>
<p>Add the following line to the head of your index.html file. (<code>./index.html</code>)</p>
<pre><code class="html"><span class="hl-7">&lt;</span><span class="hl-8">script</span><span class="hl-9"> </span><span class="hl-10">src</span><span class="hl-9">=</span><span class="hl-11">&quot;./cr-com-lib.js&quot;</span><span class="hl-7">&gt;&lt;/</span><span class="hl-8">script</span><span class="hl-7">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Here is an example of a complete index.html file with the CrComLib imported:</p>
<p>index.html:</p>
<pre><code class="html"><span class="hl-7">&lt;!</span><span class="hl-8">doctype</span><span class="hl-1"> </span><span class="hl-10">html</span><span class="hl-7">&gt;</span><br/><span class="hl-7">&lt;</span><span class="hl-8">html</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-11">&quot;en&quot;</span><span class="hl-7">&gt;</span><br/><span class="hl-1">  </span><span class="hl-7">&lt;</span><span class="hl-8">head</span><span class="hl-7">&gt;</span><br/><span class="hl-1">    </span><span class="hl-7">&lt;</span><span class="hl-8">meta</span><span class="hl-1"> </span><span class="hl-10">charset</span><span class="hl-1">=</span><span class="hl-11">&quot;UTF-8&quot;</span><span class="hl-1"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-1">    </span><span class="hl-7">&lt;</span><span class="hl-8">link</span><span class="hl-1"> </span><span class="hl-10">rel</span><span class="hl-1">=</span><span class="hl-11">&quot;icon&quot;</span><span class="hl-1"> </span><span class="hl-10">type</span><span class="hl-1">=</span><span class="hl-11">&quot;image/svg+xml&quot;</span><span class="hl-1"> </span><span class="hl-10">href</span><span class="hl-1">=</span><span class="hl-11">&quot;/vite.svg&quot;</span><span class="hl-1"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-1">    </span><span class="hl-7">&lt;</span><span class="hl-8">meta</span><span class="hl-1"> </span><span class="hl-10">name</span><span class="hl-1">=</span><span class="hl-11">&quot;viewport&quot;</span><span class="hl-1"> </span><span class="hl-10">content</span><span class="hl-1">=</span><span class="hl-11">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="hl-1"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-1">    </span><span class="hl-7">&lt;</span><span class="hl-8">title</span><span class="hl-7">&gt;</span><span class="hl-1">Vite + Svelte + TS</span><span class="hl-7">&lt;/</span><span class="hl-8">title</span><span class="hl-7">&gt;</span><br/><br/><span class="hl-1">    </span><span class="hl-6">&lt;!-- Import CrComLib here --&gt;</span><br/><span class="hl-1">	</span><span class="hl-7">&lt;</span><span class="hl-8">script</span><span class="hl-9"> </span><span class="hl-10">src</span><span class="hl-9">=</span><span class="hl-11">&quot;./cr-com-lib.js&quot;</span><span class="hl-7">&gt;&lt;/</span><span class="hl-8">script</span><span class="hl-7">&gt;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">&lt;/</span><span class="hl-8">head</span><span class="hl-7">&gt;</span><br/><span class="hl-1">  </span><span class="hl-7">&lt;</span><span class="hl-8">body</span><span class="hl-7">&gt;</span><br/><span class="hl-1">    </span><span class="hl-7">&lt;</span><span class="hl-8">div</span><span class="hl-1"> </span><span class="hl-10">id</span><span class="hl-1">=</span><span class="hl-11">&quot;app&quot;</span><span class="hl-7">&gt;&lt;/</span><span class="hl-8">div</span><span class="hl-7">&gt;</span><br/><span class="hl-1">    </span><span class="hl-7">&lt;</span><span class="hl-8">script</span><span class="hl-9"> </span><span class="hl-10">type</span><span class="hl-9">=</span><span class="hl-11">&quot;module&quot;</span><span class="hl-9"> </span><span class="hl-10">src</span><span class="hl-9">=</span><span class="hl-11">&quot;/src/main.ts&quot;</span><span class="hl-7">&gt;&lt;/</span><span class="hl-8">script</span><span class="hl-7">&gt;</span><br/><span class="hl-1">  </span><span class="hl-7">&lt;/</span><span class="hl-8">body</span><span class="hl-7">&gt;</span><br/><span class="hl-7">&lt;/</span><span class="hl-8">html</span><span class="hl-7">&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="contract-setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Contract Setup<a href="#contract-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you are using the Contract Editor to define signal names, you will need to place the generated <code>cse2j</code> file in the <code>public/config</code> directory of your project. The <code>cse2j</code> file should be renamed <code>contract.cse2j</code>. You will need to create the <code>config</code> directory in the <code>public</code> directory.</p>
<p>The final path to the <code>contract.cse2j</code> file should be <code>[Project Root]/public/config/contract.cse2j</code>.</p>
<blockquote>
<p>Note: This only makes the contract available when using the development server (<code>vite dev</code>). To use contracts with a Crestron touch screen, you will need to follow the instructions to pack the project below in <a href="#packing-for-crestron-touch-screens">Packing for Crestron Touch Screens</a></p>
</blockquote>
<a id="web-xpanel-setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Web XPanel Setup<a href="#web-xpanel-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>WebXpanel support will need to be installed separately.</p>
<p>Install the WebXPanel support package from npm:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@crestron/ch5-webxpanel</span>
</code><button type="button">Copy</button></pre>

<p>Next configure the XPanel. This can be done in the <code>src/main.ts</code> file.
Add the following code to the <code>src/main.ts</code> file below the last import statement, changing the values to match your system.</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> {</span><span class="hl-5">getWebXPanel</span><span class="hl-1">, </span><span class="hl-5">runsInContainerApp</span><span class="hl-1">} </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@crestron/ch5-webxpanel&#39;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-12">isActive</span><span class="hl-1">, </span><span class="hl-12">WebXPanel</span><span class="hl-1">, </span><span class="hl-12">WebXPanelConfigParams</span><span class="hl-1"> } = </span><span class="hl-0">getWebXPanel</span><span class="hl-1">(!</span><span class="hl-0">runsInContainerApp</span><span class="hl-1">());</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">config</span><span class="hl-1">: </span><span class="hl-13">Partial</span><span class="hl-1">&lt;</span><span class="hl-3">typeof</span><span class="hl-1"> </span><span class="hl-5">WebXPanelConfigParams</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-2">&quot;Control-system-IP&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">ipId:</span><span class="hl-1"> </span><span class="hl-2">&quot;0x03&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">roomId:</span><span class="hl-1"> </span><span class="hl-2">&quot;VC4ROOM&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">authToken:</span><span class="hl-1"> </span><span class="hl-2">&quot;eyJ.....&quot;</span><br/><span class="hl-1">};</span><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">isActive</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">WebXPanel</span><span class="hl-1">.</span><span class="hl-0">initialize</span><span class="hl-1">(</span><span class="hl-5">config</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>NOTE: You may need to accept the self-signed TLS certificate of the control systems websocket server in your browser. This can be done by navigating to the control system's websocket server in your browser and accepting the certificate.</p>
<p>On VC-4 servers, the websocket server is usually at <code>https://&lt;vc4-ip&gt;:49200</code>. On Control systems, accepting the certificate by navigating to the control system's admin page is sufficient.</p>
<p>On 4-Series hardware you may also need to issue the command <code>webserver allowsharedsession</code> to allow origins other than the control system to connect to the websocket server.
See <a href="https://sdkcon78221.crestron.com/sdk/Crestron_HTML5UI/Content/Topics/Platforms/X-CS-Settings.htm">The official Crestron Docs for more info (external link)</a></p>
</blockquote>
<a id="usage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Controls can now be used in any Svelte component. The following is an example of a a button that triggers the clock input of a toggle, and changes color based on the out signal of the toggle.</p>
<pre><code class="svelte"><span class="hl-7">&lt;</span><span class="hl-8">script</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-2">&quot;ts&quot;</span><span class="hl-7">&gt;</span><br/><span class="hl-9">  </span><span class="hl-4">import</span><span class="hl-9"> {</span><span class="hl-5">useDigital</span><span class="hl-9">} </span><span class="hl-4">from</span><span class="hl-9"> </span><span class="hl-2">&#39;ch5-svelte&#39;</span><span class="hl-9">;</span><br/><br/><span class="hl-9">  </span><span class="hl-3">const</span><span class="hl-9"> </span><span class="hl-12">toggleButton</span><span class="hl-9"> </span><span class="hl-1">=</span><span class="hl-9"> </span><span class="hl-0">useDigital</span><span class="hl-9">(</span><span class="hl-2">&quot;Toggle.Out&quot;</span><span class="hl-9">,</span><span class="hl-2">&quot;Toggle.Toggle&quot;</span><span class="hl-9">)</span><br/><span class="hl-7">&lt;/</span><span class="hl-8">script</span><span class="hl-7">&gt;</span><br/><br/><span class="hl-7">&lt;</span><span class="hl-8">button</span><span class="hl-1"> </span><span class="hl-10">style</span><span class="hl-1">=</span><span class="hl-2">&quot;background-color: </span><span class="hl-3">{</span><span class="hl-5">toggleButton</span><span class="hl-9">.</span><span class="hl-5">value</span><span class="hl-9"> </span><span class="hl-1">?</span><span class="hl-9"> </span><span class="hl-2">&#39;green&#39;</span><span class="hl-9"> </span><span class="hl-1">:</span><span class="hl-9"> </span><span class="hl-2">&#39;darkgrey&#39;</span><span class="hl-3">}</span><span class="hl-2">&quot;</span><span class="hl-1"> </span><span class="hl-10">onclick</span><span class="hl-1">=</span><span class="hl-3">{</span><span class="hl-9">() </span><span class="hl-3">=&gt;</span><span class="hl-9"> </span><span class="hl-5">toggleButton</span><span class="hl-9">.</span><span class="hl-0">pulse</span><span class="hl-9">()</span><span class="hl-3">}</span><span class="hl-7">&gt;</span><span class="hl-1">Toggle!</span><span class="hl-7">&lt;/</span><span class="hl-8">button</span><span class="hl-7">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>For more details on the functions provided, see the official docs for definitions and examples.</p>
<a id="packing-for-crestron-touch-screens" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Packing for Crestron Touch Screens<a href="#packing-for-crestron-touch-screens" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Crestron Touch Screens run the project from the local file system and not through a web server. This can cause issues with how resources are loaded. The easiest way to deal with this is to pack all resources into a single file. This can be done using the <code>vite-plugin-singlefile</code> plugin.</p>
<p>First, install the plugin:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-3">-d</span><span class="hl-1"> </span><span class="hl-2">vite-plugin-singlefile</span>
</code><button type="button">Copy</button></pre>

<p>Next, import the plugin in the <code>vite.config.ts</code> file and add it to the plugins array.
This is done in the <code>vite.config.ts</code> file in the root of your project.</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">viteSingleFile</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vite-plugin-singlefile&#39;</span><br/><br/><span class="hl-6">// https://vite.dev/config/</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-4">default</span><span class="hl-1"> </span><span class="hl-0">defineConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">plugins:</span><span class="hl-1"> [</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">    </span><span class="hl-0">viteSingleFile</span><span class="hl-1">(),</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>Here is an example of a complete <code>vite.config.ts</code> file with the <code>vite-plugin-singlefile</code> plugin added:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">defineConfig</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vite&#39;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">svelte</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@sveltejs/vite-plugin-svelte&#39;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">viteStaticCopy</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vite-plugin-static-copy&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">viteSingleFile</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vite-plugin-singlefile&#39;</span><br/><br/><span class="hl-6">// https://vitejs.dev/config/</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-4">default</span><span class="hl-1"> </span><span class="hl-0">defineConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">plugins:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-0">svelte</span><span class="hl-1">(),</span><br/><br/><span class="hl-1">    </span><span class="hl-6">//Add this to copy the cr-com-lib.js file to the build directory</span><br/><span class="hl-1">    </span><span class="hl-0">viteStaticCopy</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">targets:</span><span class="hl-1"> [</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-5">src:</span><span class="hl-1"> </span><span class="hl-2">&#39;node_modules/@crestron/ch5-crcomlib/build_bundles/umd/cr-com-lib.js&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">dest:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      ]}),</span><br/><br/><span class="hl-1">    </span><span class="hl-6">//Add this to create a single file build</span><br/><span class="hl-1">    </span><span class="hl-0">viteSingleFile</span><span class="hl-1">(),</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>Now you can build the project with the following command:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span>
</code><button type="button">Copy</button></pre>

<p>and then package the project using the Crestron CH5-CLI tool. (omit the <code>-c</code> flag if you are not using the Contract Editor)</p>
<pre><code class="bash"><span class="hl-0">ch5-cli</span><span class="hl-1"> </span><span class="hl-2">archive</span><span class="hl-1"> </span><span class="hl-3">-p</span><span class="hl-1"> </span><span class="hl-2">ch5-svelte</span><span class="hl-1"> </span><span class="hl-3">-d</span><span class="hl-1"> </span><span class="hl-2">dist/</span><span class="hl-1"> </span><span class="hl-3">-o</span><span class="hl-1"> </span><span class="hl-2">./</span><span class="hl-1"> </span><span class="hl-3">-c</span><span class="hl-1"> </span><span class="hl-2">./public/config/contract.cse2j</span>
</code><button type="button">Copy</button></pre>

<p>and finally, upload the resulting <code>.ch5z</code> file to the touch panel, replace <code>Touch-Panel-IP</code> with the IP or Hostname of your touch screen.</p>
<pre><code class="bash"><span class="hl-0">ch5-cli</span><span class="hl-1"> </span><span class="hl-2">deploy</span><span class="hl-1"> </span><span class="hl-3">-t</span><span class="hl-1"> </span><span class="hl-2">touchscreen</span><span class="hl-1"> </span><span class="hl-3">-p</span><span class="hl-1"> </span><span class="hl-3">-H</span><span class="hl-1"> </span><span class="hl-2">Touch-Panel-IP</span><span class="hl-1"> </span><span class="hl-2">ch5-svelte.ch5</span>
</code><button type="button">Copy</button></pre>

<a id="sveltekit" class="tsd-anchor"></a><h2 class="tsd-anchor-link">SvelteKit<a href="#sveltekit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The CrComLib can only be run in a browser environment, and as such, it is not compatible with server side rendering. In addition, Crestron Touch panels run the project from the local file system and not through a web server. This means that the two main features of SvelteKit, server side rendering and routing, are not useful for a Crestron UI. However, if you still wish to use SvelteKit, you can disable SSR and pre-rendering.</p>
<p>You will still need to follow the steps above to statically copy the CrComlib in the build process by using the vite-plugin-static-copy <a href="#installation">as described in the installation section</a>.</p>
<p>The CrComLib will then be imported in the <code>src/app.html</code> file. This file is located in the <code>src</code> directory of your project.</p>
<p>Here is a completed example of the <code>src/app.html</code> file with the CrComLib imported:</p>
<pre><code class="html"><span class="hl-7">&lt;!</span><span class="hl-8">doctype</span><span class="hl-1"> </span><span class="hl-10">html</span><span class="hl-7">&gt;</span><br/><span class="hl-7">&lt;</span><span class="hl-8">html</span><span class="hl-1"> </span><span class="hl-10">lang</span><span class="hl-1">=</span><span class="hl-11">&quot;en&quot;</span><span class="hl-7">&gt;</span><br/><span class="hl-1">	</span><span class="hl-7">&lt;</span><span class="hl-8">head</span><span class="hl-7">&gt;</span><br/><span class="hl-1">		</span><span class="hl-7">&lt;</span><span class="hl-8">meta</span><span class="hl-1"> </span><span class="hl-10">charset</span><span class="hl-1">=</span><span class="hl-11">&quot;utf-8&quot;</span><span class="hl-1"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-1">		</span><span class="hl-7">&lt;</span><span class="hl-8">link</span><span class="hl-1"> </span><span class="hl-10">rel</span><span class="hl-1">=</span><span class="hl-11">&quot;icon&quot;</span><span class="hl-1"> </span><span class="hl-10">href</span><span class="hl-1">=</span><span class="hl-11">&quot;%sveltekit.assets%/favicon.png&quot;</span><span class="hl-1"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-1">		</span><span class="hl-7">&lt;</span><span class="hl-8">meta</span><span class="hl-1"> </span><span class="hl-10">name</span><span class="hl-1">=</span><span class="hl-11">&quot;viewport&quot;</span><span class="hl-1"> </span><span class="hl-10">content</span><span class="hl-1">=</span><span class="hl-11">&quot;width=device-width, initial-scale=1&quot;</span><span class="hl-1"> </span><span class="hl-7">/&gt;</span><br/><span class="hl-1">		</span><br/><span class="hl-1">		</span><span class="hl-6">&lt;!-- Import CrComLib here --&gt;</span><br/><span class="hl-1">		</span><span class="hl-7">&lt;</span><span class="hl-8">script</span><span class="hl-9"> </span><span class="hl-10">src</span><span class="hl-9">=</span><span class="hl-11">&quot;./cr-com-lib.js&quot;</span><span class="hl-7">&gt;&lt;/</span><span class="hl-8">script</span><span class="hl-7">&gt;</span><br/><br/><span class="hl-1">		%sveltekit.head%</span><br/><span class="hl-1">	</span><span class="hl-7">&lt;/</span><span class="hl-8">head</span><span class="hl-7">&gt;</span><br/><span class="hl-1">	</span><span class="hl-7">&lt;</span><span class="hl-8">body</span><span class="hl-1"> </span><span class="hl-10">data-sveltekit-preload-data</span><span class="hl-1">=</span><span class="hl-11">&quot;hover&quot;</span><span class="hl-7">&gt;</span><br/><span class="hl-1">		</span><span class="hl-7">&lt;</span><span class="hl-8">div</span><span class="hl-7">&gt;</span><span class="hl-1">%sveltekit.body%</span><span class="hl-7">&lt;/</span><span class="hl-8">div</span><span class="hl-7">&gt;</span><br/><span class="hl-1">	</span><span class="hl-7">&lt;/</span><span class="hl-8">body</span><span class="hl-7">&gt;</span><br/><span class="hl-7">&lt;/</span><span class="hl-8">html</span><span class="hl-7">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Next you will need to create a global <code>+layout.ts</code> file that disables SSR and pre-rendering. This file should be located in the <code>src/routes</code> directory of your project. This is also where you can setup the WebXPanel.</p>
<blockquote>
<p>Note: SvelteKit will still attempt to load the WebXPanel on the server side even with SSR disabled. This will cause an error. To prevent this, you will need to import the WebXPanel in a conditional statement that checks if the code is running on a browser.</p>
</blockquote>
<p>Here is an example of a complete <code>src/routes/+layout.ts</code> file with SSR and pre-rendering disabled, as well as the WebXPanel setup (using a .env file for the configuration):</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">browser</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;$app/environment&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">PUBLIC_CS_IP</span><span class="hl-1">, </span><span class="hl-5">PUBLIC_IP_ID</span><span class="hl-1">, </span><span class="hl-5">PUBLIC_ROOM_ID</span><span class="hl-1">, </span><span class="hl-5">PUBLIC_TOKEN</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;$env/static/public&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">//CrComlib runs in the browser attached to the window object, so we must globally disable SSR and prerendering</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">ssr</span><span class="hl-1"> = </span><span class="hl-3">false</span><span class="hl-1">;</span><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">prerender</span><span class="hl-1"> = </span><span class="hl-3">false</span><span class="hl-1">;</span><br/><br/><span class="hl-6">//Make sure the WebXPanel is only initialized in the browser</span><br/><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">browser</span><span class="hl-1">) {</span><br/><span class="hl-1">	</span><span class="hl-3">import</span><span class="hl-1">(</span><span class="hl-2">&#39;@crestron/ch5-webxpanel&#39;</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(({ </span><span class="hl-5">getWebXPanel</span><span class="hl-1">, </span><span class="hl-5">runsInContainerApp</span><span class="hl-1"> }) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">		</span><span class="hl-6">// eslint-disable-next-line @typescript-eslint/no-unused-vars</span><br/><span class="hl-1">		</span><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-12">isActive</span><span class="hl-1">, </span><span class="hl-12">WebXPanel</span><span class="hl-1">, </span><span class="hl-12">WebXPanelConfigParams</span><span class="hl-1"> } = </span><span class="hl-0">getWebXPanel</span><span class="hl-1">(!</span><span class="hl-0">runsInContainerApp</span><span class="hl-1">());</span><br/><br/><span class="hl-1">		</span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-12">config</span><span class="hl-1">: </span><span class="hl-13">Partial</span><span class="hl-1">&lt;</span><span class="hl-3">typeof</span><span class="hl-1"> </span><span class="hl-5">WebXPanelConfigParams</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">			</span><span class="hl-5">host:</span><span class="hl-1"> </span><span class="hl-12">PUBLIC_CS_IP</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-5">ipId:</span><span class="hl-1"> </span><span class="hl-12">PUBLIC_IP_ID</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-5">roomId:</span><span class="hl-1"> </span><span class="hl-12">PUBLIC_ROOM_ID</span><span class="hl-1">,</span><br/><span class="hl-1">			</span><span class="hl-5">authToken:</span><span class="hl-1"> </span><span class="hl-12">PUBLIC_TOKEN</span><br/><span class="hl-1">		};</span><br/><span class="hl-1">		</span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">isActive</span><span class="hl-1">) {</span><br/><span class="hl-1">			</span><span class="hl-5">WebXPanel</span><span class="hl-1">.</span><span class="hl-0">initialize</span><span class="hl-1">(</span><span class="hl-5">config</span><span class="hl-1">);</span><br/><span class="hl-1">		}</span><br/><span class="hl-1">	});</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#crestron-ch5-wrapper-for-svelte"><span>Crestron CH5 <wbr/>Wrapper for <wbr/>Svelte</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#prerequisites"><span>Prerequisites</span></a></li><li><a href="#project-creation"><span>Project <wbr/>Creation</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#contract-setup"><span>Contract <wbr/>Setup</span></a></li><li><a href="#web-xpanel-setup"><span>Web XPanel <wbr/>Setup</span></a></li><li><a href="#usage"><span>Usage</span></a></li></ul></li><li><a href="#packing-for-crestron-touch-screens"><span>Packing for <wbr/>Crestron <wbr/>Touch <wbr/>Screens</span></a></li><li><a href="#sveltekit"><span>Svelte<wbr/>Kit</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">ch5-svelte</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
